<div
  class="hero-section"
  [style.background-image]="
    'linear-gradient(to bottom, rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.8)), url(' +
    imageBaseUrl +
    movie?.backdrop_path +
    ')'
  "
  [style.background-repeat]="'no-repeat'"
  [style.background-position]="'center'"
  [style.background-size]="'cover'"
>
  <div class="hero-section__container">
    <div class="hero-section__poster" *ngIf="movie?.poster_path">
      <img
        class="hero-section__poster-image"
        [src]="
          movie?.poster_path
            ? (movie?.poster_path | imageUrl : 500 : false)
            : 'assets/images/no-picture.png'
        "
        [alt]="movie?.title"
        loading="lazy"
      />
    </div>
    <div
      class="hero-section__poster hero-section__poster--no-image"
      *ngIf="!movie?.poster_path"
    >
      <img
        class="hero-section__poster-image--no-image"
        src="assets/icons/picture.svg"
        alt="No poster"
        class="hero-section__poster-image--no-image"
        loading="lazy"
      />
    </div>
    <div class="hero-section__content">
      <div class="hero-section__info">
        <h1 class="hero-section__info-title">
          {{ movie?.title || "-------" }}
          <span class="hero-section__info-year"
            >({{ movie?.release_date | date : "yyyy" }})</span
          >
        </h1>
        <div class="hero-section__meta">
          <span class="hero-section__meta-age">{{ age }}</span>
          <span> </span>
          <span class="hero-section__meta-date">{{
            movie?.release_date | date : "dd/MM/yyyy"
          }}</span>
          <span class="hero-section__meta-genre">{{ genres }}</span>
          <span class="hero-section__meta-duration">{{
            movie?.runtime | formatTime
          }}</span>
        </div>
      </div>

      <div class="hero-section__user-score">
        <app-user-score
          [size]="'medium'"
          [score]="movie?.vote_average"
        ></app-user-score>
        <span class="hero-section__user-score-label">User Score</span>
      </div>

      <div class="hero-section__actions">
        <app-button
          variant="primary"
          size="large"
          [disabled]="disablePlayTrailer"
          (clicked)="onPlayTrailer()"
        >
          <img
            class="btn-icon"
            src="assets/icons/play.svg"
            alt="play"
            loading="lazy"
          />
          Play Trailer
        </app-button>

        <!-- Icon buttons -->
        <!-- (clicked)="onAddToList()" -->
        <ng-container *ngIf="!isAdded">
          <app-tooltip [text]="'Add to watchlist'" [position]="'top'">
            <app-button
              variant="icon"
              size="medium"
              (click)="handleToggleLikeBtn()"
            >
              <svg
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M12 6V18M18 12L6 12"
                  stroke="white"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </svg>
            </app-button>
          </app-tooltip>
        </ng-container>
        <ng-container *ngIf="isAdded">
          <app-tooltip [text]="'Remove from watchlist'" [position]="'top'">
            <app-button
              variant="icon"
              size="medium"
              (click)="handleToggleAddBtn()"
            >
              <svg
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M12 6V18M18 12L6 12"
                  stroke="white"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </svg>
            </app-button>
          </app-tooltip>
        </ng-container>

        <!-- (clicked)="onLike() -->
        <ng-container *ngIf="!isFavorite">
          <app-tooltip [text]="'Mark as favorite'" [position]="'top'">
            <app-button
              variant="icon"
              size="medium"
              (click)="handleToggleLikeBtn()"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="white"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
                class="action-btn-icon"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"
                />
              </svg>
            </app-button>
          </app-tooltip>
        </ng-container>
        <ng-container *ngIf="isFavorite">
          <app-tooltip [text]="'Remove from favorite list'" [position]="'top'">
            <app-button
              variant="icon"
              size="medium"
              (click)="handleToggleLikeBtn()"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="white"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
                class="action-btn-icon action-btn-icon--is-favorite"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"
                />
              </svg>
            </app-button>
          </app-tooltip>
        </ng-container>
      </div>

      <p class="hero-section__tagline">
        {{ movie?.tagline }}
      </p>

      <div class="hero-section__overview">
        <h2 class="hero-section__overview-text">Overview</h2>
        <p class="hero-section__overview-content">
          {{ movie?.overview }}
        </p>
      </div>
    </div>
  </div>
</div>

<app-trailer-modal
  [openModal]="openTrailerModal"
  (closeEvent)="onCloseTrailerModal()"
  [trailer]="trailer"
></app-trailer-modal>
